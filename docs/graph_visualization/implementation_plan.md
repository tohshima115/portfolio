# 実装計画：グラフ可視化機能

## 1. 依存ライブラリの導入
- ネットワークグラフの物理シミュレーション描画のために `d3-force` と型定義パッケージ `@types/d3-force` をインストールする。
- 描画やアニメーションには既存の `framer-motion` と React を連携させる。

## 2. 汎用グラフコンポーネントの作成
**ファイル:** `src/components/common/SystemGraph.tsx`
- Force Simulation（`d3-force`）のライフサイクルを管理し、ReactのStateに結びつける。
- コンテナサイズが変わった際に自動追従できるよう `ResizeObserver` を適用する。
- ノード（works, tag, blogなど）の種類ごとにサイズやスタイルを分岐させるロジックを設ける。
- 線（リンク）はパフォーマンスのためにSVG `<line>` 要素で描画し、ノード（要素）はクリック判定とホバーアニメーションのために `motion.div` を使ってDOMでオーバーレイ配置する。

## 3. Works一覧ページ（Index）への組み込み
**ファイル:** `src/pages/works/index.astro`
- プロジェクトデータから `nodes` および `links` の配列（D3のスキーマに準拠）を構築する。
  - 各プロジェクトをノード化する。
  - プロジェクトの `stack`（技術タグ）を展開し、タグノードを作成する。重複のないようにSetで管理する。
  - プロジェクトからタグへのリンクを作成する。
- `<SystemGraph>` コンポーネントをレイアウトの右カラムに配置し、上記の配列データを流し込む。
- 既存のプロジェクトグリッドとのレイアウトバランスを調整する。

## 4. Works詳細ページ（Slug）への組み込み
**ファイル:** `src/pages/works/[...slug].astro`
- 一覧ページと同様のロジックで D3 用配列を作成するが、対象を絞る。
- 表示中のプロジェクトを中心に据え、関連するタグノードを追加。
- さらに他の全プロジェクトから「同じタグを持つもの」を抽出し、それらもノードとしてグラフに追加する。
- 定義済み `<ProjectMetaPanel>` パネルの下部にグラフを表示し、コンテキスト理解を補助する。
