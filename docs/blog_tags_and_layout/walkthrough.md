# ウォークスルー（変更内容の確認）

## 1. タグ機能の追加とスキーマ定義
Astro の `src/content/config.ts` において、`blog` コレクションに `tags` スキーマを追加しました。これにより各ブログの Markdown（フロントマター）にタグを記載可能となり、`sample-1.md` ～ `sample-3.md` の3ファイルで実際に `Astro`, `React`, `Engineering` などの検証用タグを追加しました。

## 2. ブログ一覧への Relation Graph
`src/pages/blog/index.astro` を編集し、配列化された全ブログとそのタグ情報から `nodes` と `links` を動的に生成するロジックを実装しました。このデータを右カラムにある `SystemGraph` コンポーネントに渡すことで、Works ページと同じように視覚的な関係性ネットワーク図を表示させています。

・タグによるフィルタリング機能（一覧からタグを選ぶと一覧が絞り込まれる機構）もWorksから移植して動作するように調整しました。

## 3. ブログ詳細な3カラムレイアウト
`src/pages/blog/[...slug].astro` に以下の変更を行いました：
- **左カラム (Table of Contents)**: Astro の `render()` メソッドから返される `headings` 配列を利用し、記事内用ナビゲーションを配置しました。ヘッダーの深さ（`depth`）によって字下げや太さを変え、視覚的にわかりやすくしました。
- **中央カラム (Main Content)**: Tailwind Typography プログイン (`@tailwindcss/typography` 互換クラス)を用いて、見出しやパラグラフのスタイルをポートフォリオのテイスト（黄色アクセントやモノスペースフォントなど）にマッチさせました。
- **右カラム (Context Graph)**: 当該ブログが持っているタグと、そのタグを共有する「他のブログ記事」のノードだけの繋がりだけを計算し、現在のページを表すノードがハイライトされるグラフとして出力させました。
  - **追加修正**: ユーザーからのフィードバックを受け、グラフ内のノード上にタグだけでなく**ブログのテキストタイトル**も表示されるよう `SystemGraph.tsx` の表示条件を改修しました。
  - **追加修正**: 画面をスクロールした際、左の目次(TOC)と同様に、右側の Graph 領域も画面内に追従して留まるよう（`sticky` 及び `self-start`）、親コンテナのレイアウトクラスを調整しました（一覧・詳細ページ両方に対応）。
  - **追加修正**: ユーザーフィードバックを受け、マークダウンファイル側のH1見出し（タイトル部分）は Astro のレイアウト側でタイトルとして表示されるため重複を避けるべく削除しました。あわせて、ブログ本文のフォントサイズや見出しのバランスを `prose-sm md:prose-base` クラス等を用いて全体的にタイトかつモダンに調整しました。
  - **追加修正**: そもそも Tailwind Typography プラグイン (`@tailwindcss/typography`) が `package.json` にインストールされておらず、単なる `prose` クラスが機能せずデフォルトの巨大な H2 が適用されてしまうというバグが発覚したため、プラグインのインストールならびに `global.css` への `@plugin "@tailwindcss/typography";` の追加を行い、根本から修正しました。
